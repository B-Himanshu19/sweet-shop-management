{"numFailedTestSuites":4,"numFailedTests":6,"numPassedTestSuites":6,"numPassedTests":148,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":10,"numTotalTests":154,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1765702892079,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["AppError","constructor"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"AppError constructor should create error with message and default status code","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create error with message and default status code"},{"ancestorTitles":["AppError","constructor"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AppError constructor should create error with custom status code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create error with custom status code"},{"ancestorTitles":["AppError","constructor"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"AppError constructor should create error with details","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create error with details"},{"ancestorTitles":["AppError","constructor"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"AppError constructor should capture stack trace","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should capture stack trace"},{"ancestorTitles":["AppError","instanceof checks"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AppError instanceof checks should be instance of AppError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should be instance of AppError"},{"ancestorTitles":["AppError","instanceof checks"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AppError instanceof checks should be instance of Error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should be instance of Error"},{"ancestorTitles":["handleError","with AppError"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"handleError with AppError should return error message and status code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return error message and status code"},{"ancestorTitles":["handleError","with AppError"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleError with AppError should include details when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should include details when provided"},{"ancestorTitles":["handleError","with standard Error"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleError with standard Error should handle generic Error messages","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle generic Error messages"},{"ancestorTitles":["handleError","with standard Error"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\utils\\__tests__\\errorHandler.test.ts:106:30)\n    at Promise.then.completed (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\DELL\\sweet-shop-management\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"handleError with standard Error should return 400 for validation errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 for validation errors"},{"ancestorTitles":["handleError","with standard Error"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError with standard Error should return 404 for not found errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 for not found errors"},{"ancestorTitles":["handleError","with standard Error"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleError with standard Error should return 500 for unknown errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 for unknown errors"},{"ancestorTitles":["handleError","with non-Error objects"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError with non-Error objects should handle unknown error types gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle unknown error types gracefully"},{"ancestorTitles":["handleError","with non-Error objects"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError with non-Error objects should handle null/undefined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle null/undefined"},{"ancestorTitles":["handleError","error status code detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError error status code detection should recognize \"duplicate\" errors as 409","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recognize \"duplicate\" errors as 409"},{"ancestorTitles":["handleError","error status code detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError error status code detection should recognize \"unauthorized\" errors as 401","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recognize \"unauthorized\" errors as 401"},{"ancestorTitles":["handleError","error status code detection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleError error status code detection should recognize \"insufficient\" errors as 400","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recognize \"insufficient\" errors as 400"},{"ancestorTitles":["handleError","error status code detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleError error status code detection should recognize \"not found\" errors as 404","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recognize \"not found\" errors as 404"},{"ancestorTitles":["handleError","error status code detection"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"handleError error status code detection should recognize \"admin\" errors as 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should recognize \"admin\" errors as 403"},{"ancestorTitles":["handleValidationErrors"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"handleValidationErrors should return true and send error response when errors exist","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return true and send error response when errors exist"},{"ancestorTitles":["handleValidationErrors"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleValidationErrors should return false when no errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false when no errors"}],"endTime":1765702899396,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mhandleError › with standard Error › should return 400 for validation errors\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m400\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 104 |\u001b[39m       handleError(error\u001b[33m,\u001b[39m mockRes \u001b[36mas\u001b[39m \u001b[33mResponse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 106 |\u001b[39m       expect(mockRes\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m     it(\u001b[32m'should return 404 for not found errors'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/utils/__tests__/errorHandler.test.ts\u001b[39m\u001b[0m\u001b[2m:106:30)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\utils\\__tests__\\errorHandler.test.ts","startTime":1765702893668,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["SweetService","createSweet"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"SweetService createSweet should create a new sweet successfully","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should create a new sweet successfully"},{"ancestorTitles":["SweetService","createSweet"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"SweetService createSweet should throw error if sweet name already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if sweet name already exists"},{"ancestorTitles":["SweetService","getAllSweets"],"duration":105,"failureDetails":[],"failureMessages":[],"fullName":"SweetService getAllSweets should return all sweets","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return all sweets"},{"ancestorTitles":["SweetService","getSweetById"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"SweetService getSweetById should return sweet by id","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return sweet by id"},{"ancestorTitles":["SweetService","getSweetById"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"SweetService getSweetById should return null for non-existent id","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null for non-existent id"},{"ancestorTitles":["SweetService","updateSweet"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"SweetService updateSweet should update sweet successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update sweet successfully"},{"ancestorTitles":["SweetService","updateSweet"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"SweetService updateSweet should throw error if sweet not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if sweet not found"},{"ancestorTitles":["SweetService","deleteSweet"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"SweetService deleteSweet should delete sweet successfully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should delete sweet successfully"},{"ancestorTitles":["SweetService","deleteSweet"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SweetService deleteSweet should throw error if sweet not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if sweet not found"},{"ancestorTitles":["SweetService","searchSweets"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"SweetService searchSweets should search by name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should search by name"},{"ancestorTitles":["SweetService","searchSweets"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"SweetService searchSweets should search by category","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should search by category"},{"ancestorTitles":["SweetService","searchSweets"],"duration":168,"failureDetails":[],"failureMessages":[],"fullName":"SweetService searchSweets should search by price range","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should search by price range"},{"ancestorTitles":["SweetService","purchaseSweet"],"duration":54,"failureDetails":[],"failureMessages":[],"fullName":"SweetService purchaseSweet should decrease quantity on purchase","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should decrease quantity on purchase"},{"ancestorTitles":["SweetService","purchaseSweet"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"SweetService purchaseSweet should throw error if insufficient quantity","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if insufficient quantity"},{"ancestorTitles":["SweetService","restockSweet"],"duration":168,"failureDetails":[],"failureMessages":[],"fullName":"SweetService restockSweet should increase quantity on restock","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should increase quantity on restock"}],"endTime":1765702900818,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\services\\__tests__\\sweetService.test.ts","startTime":1765702899485,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PurchaseService","createPurchase"],"duration":116,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService createPurchase should create a purchase record successfully","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should create a purchase record successfully"},{"ancestorTitles":["PurchaseService","createPurchase"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService createPurchase should calculate total_amount correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate total_amount correctly"},{"ancestorTitles":["PurchaseService","getUserPurchases"],"duration":35,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getUserPurchases should return empty array when user has no purchases","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when user has no purchases"},{"ancestorTitles":["PurchaseService","getUserPurchases"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getUserPurchases should return all purchases for a specific user","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return all purchases for a specific user"},{"ancestorTitles":["PurchaseService","getUserPurchases"],"duration":275,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getUserPurchases should not return purchases from other users","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not return purchases from other users"},{"ancestorTitles":["PurchaseService","getAllPurchases"],"duration":292,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getAllPurchases should return all purchases from all users","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return all purchases from all users"},{"ancestorTitles":["PurchaseService","getAllPurchases"],"duration":44,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getAllPurchases should include username in purchase data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should include username in purchase data"},{"ancestorTitles":["PurchaseService","getAllPurchases"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"PurchaseService getAllPurchases should return purchases ordered by purchased_at DESC","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return purchases ordered by purchased_at DESC"}],"endTime":1765702901455,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\services\\__tests__\\purchaseService.test.ts","startTime":1765702893671,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Middleware","authenticateToken","missing token"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken missing token should return 401 when no authorization header","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 401 when no authorization header"},{"ancestorTitles":["Authentication Middleware","authenticateToken","missing token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken missing token should return 401 when authorization header is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 401 when authorization header is empty"},{"ancestorTitles":["Authentication Middleware","authenticateToken","missing token"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken missing token should return 401 when only \"Bearer\" is provided without token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 401 when only \"Bearer\" is provided without token"},{"ancestorTitles":["Authentication Middleware","authenticateToken","invalid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken invalid token should return 403 when token is invalid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 403 when token is invalid"},{"ancestorTitles":["Authentication Middleware","authenticateToken","invalid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken invalid token should return 403 when token is expired","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 when token is expired"},{"ancestorTitles":["Authentication Middleware","authenticateToken","valid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken valid token should set user from valid token and call next","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set user from valid token and call next"},{"ancestorTitles":["Authentication Middleware","authenticateToken","valid token"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken valid token should extract token correctly from \"Bearer\" prefix","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should extract token correctly from \"Bearer\" prefix"},{"ancestorTitles":["Authentication Middleware","authenticateToken","valid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken valid token should use JWT_SECRET from environment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should use JWT_SECRET from environment"},{"ancestorTitles":["Authentication Middleware","authenticateToken","valid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken valid token should use default secret if JWT_SECRET env not set","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should use default secret if JWT_SECRET env not set"},{"ancestorTitles":["Authentication Middleware","authenticateToken","valid token"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken valid token should handle extra spaces in authorization header","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle extra spaces in authorization header"},{"ancestorTitles":["Authentication Middleware","authenticateToken","token payload variations"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken token payload variations should handle admin user token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle admin user token"},{"ancestorTitles":["Authentication Middleware","authenticateToken","token payload variations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware authenticateToken token payload variations should handle regular user token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle regular user token"},{"ancestorTitles":["Authentication Middleware","requireAdmin","no authentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware requireAdmin no authentication should return 401 when req.user is undefined","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 401 when req.user is undefined"},{"ancestorTitles":["Authentication Middleware","requireAdmin","non-admin user"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware requireAdmin non-admin user should return 403 for regular user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 403 for regular user"},{"ancestorTitles":["Authentication Middleware","requireAdmin","admin user"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware requireAdmin admin user should call next for admin user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call next for admin user"},{"ancestorTitles":["Authentication Middleware","requireAdmin","admin user"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware requireAdmin admin user should allow only exact \"admin\" role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow only exact \"admin\" role"},{"ancestorTitles":["Authentication Middleware","middleware composition"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware middleware composition should authenticate then check admin role in sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should authenticate then check admin role in sequence"}],"endTime":1765702901504,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\middleware\\__tests__\\auth.test.ts","startTime":1765702900882,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Constants","USER_ROLES"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"Constants USER_ROLES should have USER role defined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have USER role defined"},{"ancestorTitles":["Constants","USER_ROLES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants USER_ROLES should have ADMIN role defined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have ADMIN role defined"},{"ancestorTitles":["Constants","USER_ROLES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants USER_ROLES should have exactly 2 roles","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have exactly 2 roles"},{"ancestorTitles":["Constants","USER_ROLES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants USER_ROLES should export standard role values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should export standard role values"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 200 OK status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 200 OK status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 201 CREATED status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 201 CREATED status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 400 BAD_REQUEST status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 400 BAD_REQUEST status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 401 UNAUTHORIZED status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 401 UNAUTHORIZED status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 403 FORBIDDEN status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 403 FORBIDDEN status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 404 NOT_FOUND status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 404 NOT_FOUND status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 409 CONFLICT status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 409 CONFLICT status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have 500 INTERNAL_SERVER_ERROR status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have 500 INTERNAL_SERVER_ERROR status"},{"ancestorTitles":["Constants","HTTP_STATUS"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Constants HTTP_STATUS should have all standard HTTP status codes","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should have all standard HTTP status codes"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have SWEET_NOT_FOUND message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have SWEET_NOT_FOUND message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have USER_NOT_FOUND message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have USER_NOT_FOUND message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have INVALID_CREDENTIALS message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have INVALID_CREDENTIALS message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have AUTH_REQUIRED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have AUTH_REQUIRED message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have ADMIN_REQUIRED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have ADMIN_REQUIRED message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have INSUFFICIENT_QUANTITY message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have INSUFFICIENT_QUANTITY message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have USER_ALREADY_EXISTS message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have USER_ALREADY_EXISTS message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have SWEET_NAME_EXISTS message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have SWEET_NAME_EXISTS message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have INVALID_TOKEN message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have INVALID_TOKEN message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have TOKEN_REQUIRED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have TOKEN_REQUIRED message"},{"ancestorTitles":["Constants","ERROR_MESSAGES"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Constants ERROR_MESSAGES should have meaningful error messages","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"should have meaningful error messages"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have SWEET_CREATED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have SWEET_CREATED message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have SWEET_UPDATED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have SWEET_UPDATED message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have SWEET_DELETED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have SWEET_DELETED message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have USER_REGISTERED message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have USER_REGISTERED message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have PURCHASE_SUCCESS message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have PURCHASE_SUCCESS message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have RESTOCK_SUCCESS message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have RESTOCK_SUCCESS message"},{"ancestorTitles":["Constants","SUCCESS_MESSAGES"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Constants SUCCESS_MESSAGES should have meaningful success messages","invocations":1,"location":null,"numPassingAsserts":18,"retryReasons":[],"status":"passed","title":"should have meaningful success messages"},{"ancestorTitles":["Constants","Message consistency"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants Message consistency should not have duplicate error messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not have duplicate error messages"},{"ancestorTitles":["Constants","Message consistency"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Constants Message consistency should not have duplicate success messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not have duplicate success messages"},{"ancestorTitles":["Constants","Message consistency"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Constants Message consistency should not overlap between error and success messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not overlap between error and success messages"}],"endTime":1765702901899,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\utils\\__tests__\\constants.test.ts","startTime":1765702901525,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AuthService","register"],"duration":412,"failureDetails":[],"failureMessages":[],"fullName":"AuthService register should register a new user successfully","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should register a new user successfully"},{"ancestorTitles":["AuthService","register"],"duration":327,"failureDetails":[],"failureMessages":[],"fullName":"AuthService register should throw error if username already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if username already exists"},{"ancestorTitles":["AuthService","register"],"duration":277,"failureDetails":[],"failureMessages":[],"fullName":"AuthService register should throw error if email already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if email already exists"},{"ancestorTitles":["AuthService","login"],"duration":381,"failureDetails":[],"failureMessages":[],"fullName":"AuthService login should login successfully with correct credentials","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should login successfully with correct credentials"},{"ancestorTitles":["AuthService","login"],"duration":457,"failureDetails":[],"failureMessages":[],"fullName":"AuthService login should throw error with incorrect password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error with incorrect password"},{"ancestorTitles":["AuthService","login"],"duration":277,"failureDetails":[],"failureMessages":[],"fullName":"AuthService login should throw error with non-existent user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error with non-existent user"}],"endTime":1765702902222,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\services\\__tests__\\authService.test.ts","startTime":1765702893687,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth API Integration Tests","POST /api/auth/register"],"duration":249,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests POST /api/auth/register should register a new user","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should register a new user"},{"ancestorTitles":["Auth API Integration Tests","POST /api/auth/register"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests POST /api/auth/register should return 400 for invalid data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for invalid data"},{"ancestorTitles":["Auth API Integration Tests","POST /api/auth/login"],"duration":132,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests POST /api/auth/login should login successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should login successfully"},{"ancestorTitles":["Auth API Integration Tests","POST /api/auth/login"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests POST /api/auth/login should return 401 for invalid credentials","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 for invalid credentials"},{"ancestorTitles":["Auth API Integration Tests","GET /api/auth/me"],"duration":14,"failureDetails":[{"matcherResult":{"actual":403,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m403\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m403\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\auth.test.ts:86:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Auth API Integration Tests GET /api/auth/me should return current user with valid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return current user with valid token"},{"ancestorTitles":["Auth API Integration Tests","GET /api/auth/me"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests GET /api/auth/me should return 401 without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 without token"},{"ancestorTitles":["Auth API Integration Tests","GET /api/auth/me"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Auth API Integration Tests GET /api/auth/me should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 403 with invalid token"}],"endTime":1765702902938,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAuth API Integration Tests › GET /api/auth/me › should return current user with valid token\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m403\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 84 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 86 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'username'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'newuser'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'email'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'password'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/integration/auth.test.ts\u001b[39m\u001b[0m\u001b[2m:86:31)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\auth.test.ts","startTime":1765702893740,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets"],"duration":148,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets should create sweet as admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create sweet as admin"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets should return 403 for non-admin user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 403 for non-admin user"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets should return 401 without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 without token"},{"ancestorTitles":["Sweets API Integration Tests","GET /api/sweets"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests GET /api/sweets should get all sweets with authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should get all sweets with authentication"},{"ancestorTitles":["Sweets API Integration Tests","GET /api/sweets/search"],"duration":90,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests GET /api/sweets/search should search sweets by name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should search sweets by name"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets/:id/purchase"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets/:id/purchase should purchase sweet successfully as user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should purchase sweet successfully as user"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets/:id/purchase"],"duration":49,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\sweets.test.ts:144:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Sweets API Integration Tests POST /api/sweets/:id/purchase should purchase sweet successfully as admin","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should purchase sweet successfully as admin"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets/:id/purchase"],"duration":77,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets/:id/purchase should decrease quantity correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should decrease quantity correctly"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets/:id/purchase"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets/:id/purchase should return 400 for insufficient quantity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 for insufficient quantity"},{"ancestorTitles":["Sweets API Integration Tests","POST /api/sweets/:id/purchase"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests POST /api/sweets/:id/purchase should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 without authentication"},{"ancestorTitles":["Sweets API Integration Tests","DELETE /api/sweets/:id"],"duration":41,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests DELETE /api/sweets/:id should delete sweet as admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should delete sweet as admin"},{"ancestorTitles":["Sweets API Integration Tests","DELETE /api/sweets/:id"],"duration":54,"failureDetails":[],"failureMessages":[],"fullName":"Sweets API Integration Tests DELETE /api/sweets/:id should return 403 for non-admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 403 for non-admin"}],"endTime":1765702903677,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSweets API Integration Tests › POST /api/sweets/:id/purchase › should purchase sweet successfully as admin\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 142 |\u001b[39m         \u001b[33m.\u001b[39msend({ quantity\u001b[33m:\u001b[39m \u001b[35m3\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 144 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msweet\u001b[33m.\u001b[39mquantity)\u001b[33m.\u001b[39mtoBe(\u001b[35m12\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Purchase successful'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 147 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/integration/sweets.test.ts\u001b[39m\u001b[0m\u001b[2m:144:31)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\sweets.test.ts","startTime":1765702893737,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/history"],"duration":156,"failureDetails":[],"failureMessages":[],"fullName":"Purchases API Integration Tests GET /api/purchases/history should return user purchase history","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should return user purchase history"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/history"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Purchases API Integration Tests GET /api/purchases/history should return empty array when user has no purchases","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return empty array when user has no purchases"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/history"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Purchases API Integration Tests GET /api/purchases/history should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 without authentication"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/history"],"duration":271,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\purchases.test.ts:112:44)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Purchases API Integration Tests GET /api/purchases/history should only return purchases for the authenticated user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only return purchases for the authenticated user"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/all"],"duration":62,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\purchases.test.ts:145:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Purchases API Integration Tests GET /api/purchases/all should return all purchases for admin","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return all purchases for admin"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/all"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Purchases API Integration Tests GET /api/purchases/all should return 403 for non-admin user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 for non-admin user"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/all"],"duration":44,"failureDetails":[],"failureMessages":[],"fullName":"Purchases API Integration Tests GET /api/purchases/all should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 without authentication"},{"ancestorTitles":["Purchases API Integration Tests","GET /api/purchases/all"],"duration":28,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m404\u001b[39m\n    at Object.<anonymous> (C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\purchases.test.ts:197:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Purchases API Integration Tests GET /api/purchases/all should return purchases ordered by purchased_at DESC","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return purchases ordered by purchased_at DESC"}],"endTime":1765702903781,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPurchases API Integration Tests › GET /api/purchases/history › should only return purchases for the authenticated user\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 110 |\u001b[39m         \u001b[33m.\u001b[39msend({ quantity\u001b[33m:\u001b[39m \u001b[35m1.0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 112 |\u001b[39m       expect(otherPurchaseResponse\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m       \u001b[90m// Make purchase as test user\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m       \u001b[36mconst\u001b[39m userPurchaseResponse \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/integration/purchases.test.ts\u001b[39m\u001b[0m\u001b[2m:112:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPurchases API Integration Tests › GET /api/purchases/all › should return all purchases for admin\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 143 |\u001b[39m         \u001b[33m.\u001b[39msend({ quantity\u001b[33m:\u001b[39m \u001b[35m1.0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 144 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 145 |\u001b[39m       expect(purchase1Response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 147 |\u001b[39m       \u001b[90m// Create another user and make purchase\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 148 |\u001b[39m       \u001b[36mconst\u001b[39m user2 \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m authService\u001b[33m.\u001b[39mregister({\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/integration/purchases.test.ts\u001b[39m\u001b[0m\u001b[2m:145:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPurchases API Integration Tests › GET /api/purchases/all › should return purchases ordered by purchased_at DESC\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m404\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 195 |\u001b[39m         \u001b[33m.\u001b[39msend({ quantity\u001b[33m:\u001b[39m \u001b[35m1.0\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 196 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(purchase1Response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 199 |\u001b[39m       \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m(resolve \u001b[33m=>\u001b[39m setTimeout(resolve\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/integration/purchases.test.ts\u001b[39m\u001b[0m\u001b[2m:197:40)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\purchases.test.ts","startTime":1765702893673,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":131,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for missing username","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 for missing username"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for missing email","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 for missing email"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for missing password","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 for missing password"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for invalid email format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for invalid email format"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for short username","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for short username"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 400 for short password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for short password"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":183,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 409 when username already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 409 when username already exists"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/register - Error Cases"],"duration":153,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/register - Error Cases should return 409 when email already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 409 when email already exists"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/login - Error Cases"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/login - Error Cases should return 400 for missing username","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing username"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/login - Error Cases"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/login - Error Cases should return 400 for missing password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing password"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/login - Error Cases"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/login - Error Cases should return 401 for invalid username","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 401 for invalid username"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/auth/login - Error Cases"],"duration":292,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/auth/login - Error Cases should return 401 for wrong password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 for wrong password"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should return 401 when accessing protected route without token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 401 when accessing protected route without token"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should return 401 with invalid token format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 with invalid token format"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should return 403 with malformed Bearer token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 403 with malformed Bearer token"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should return 403 when accessing admin-only endpoint as regular user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 403 when accessing admin-only endpoint as regular user"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should allow access with valid admin token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow access with valid admin token"},{"ancestorTitles":["Error Handling Integration Tests","Protected Routes - Authorization Errors"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests Protected Routes - Authorization Errors should allow access with valid user token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow access with valid user token"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for missing name","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing name"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for missing category","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing category"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for missing price","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing price"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for negative price","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for negative price"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for non-numeric price","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for non-numeric price"},{"ancestorTitles":["Error Handling Integration Tests","POST /api/sweets - Validation Errors"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests POST /api/sweets - Validation Errors should return 400 for negative quantity","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for negative quantity"},{"ancestorTitles":["Error Handling Integration Tests","GET /api/sweets/:id - Not Found Errors"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests GET /api/sweets/:id - Not Found Errors should return 404 for non-existent sweet","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 for non-existent sweet"},{"ancestorTitles":["Error Handling Integration Tests","GET /api/sweets/:id - Not Found Errors"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Error Handling Integration Tests GET /api/sweets/:id - Not Found Errors should return 400 or 500 for invalid sweet ID format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 or 500 for invalid sweet ID format"}],"endTime":1765702904393,"message":"","name":"C:\\Users\\DELL\\sweet-shop-management\\backend\\src\\__tests__\\integration\\errorHandling.test.ts","startTime":1765702893665,"status":"passed","summary":""}],"wasInterrupted":false}
